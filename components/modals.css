/**
 * =========================================================
 * BOAT UI â€” Modals (CSS-only via :target)
 * =========================================================
 * Zero-JavaScript modal dialogs using the :target selector.
 *
 * Usage:
 *   <!-- Trigger -->
 *   <a href="#modal-example" class="btn btn-primary">Open Modal</a>
 *
 *   <!-- Modal -->
 *   <div id="modal-example" class="modal" role="dialog"
 *        aria-modal="true" aria-labelledby="modal-title">
 *     <div class="modal-dialog">
 *       <div class="modal-content">
 *         <div class="modal-header">
 *           <h2 id="modal-title" class="modal-title">Modal Title</h2>
 *           <a href="#" class="btn-close" aria-label="Close modal"></a>
 *         </div>
 *         <div class="modal-body">Content here.</div>
 *         <div class="modal-footer">
 *           <a href="#" class="btn btn-secondary">Cancel</a>
 *           <button class="btn btn-primary">Confirm</button>
 *         </div>
 *       </div>
 *     </div>
 *   </div>
 *
 * Accessibility note: Add tabindex="-1" to .modal-dialog and
 * use JS to manage focus for full WCAG compliance.
 * =========================================================
 */

/* =========================================================
 * MODAL OVERLAY
 * ========================================================= */

.modal {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-4);

    /* Hidden by default */
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity var(--duration-300) var(--ease-out),
        visibility var(--duration-300) var(--ease-out);

    /* Backdrop */
    background-color: var(--color-overlay);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

/* Show when targeted */
.modal:target {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

/* =========================================================
 * MODAL DIALOG
 * ========================================================= */

.modal-dialog {
    position: relative;
    width: 100%;
    max-width: 32rem;
    max-height: calc(100vh - var(--space-8));
    display: flex;
    flex-direction: column;

    /* Slide-in animation */
    transform: translateY(1.5rem) scale(0.97);
    transition: transform var(--duration-300) var(--ease-out);
}

.modal:target .modal-dialog {
    transform: translateY(0) scale(1);
}

/* Size variants */
.modal-sm .modal-dialog {
    max-width: 22rem;
}

.modal-lg .modal-dialog {
    max-width: 48rem;
}

.modal-xl .modal-dialog {
    max-width: 64rem;
}

.modal-fullscreen .modal-dialog {
    max-width: 100%;
    max-height: 100%;
    width: 100%;
    height: 100%;
    margin: 0;
    border-radius: 0;
}

/* =========================================================
 * MODAL CONTENT
 * ========================================================= */

.modal-content {
    display: flex;
    flex-direction: column;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-2xl);
    overflow: hidden;
    max-height: calc(100vh - var(--space-8));
}

.modal-fullscreen .modal-content {
    border-radius: 0;
    height: 100%;
}

/* =========================================================
 * MODAL SECTIONS
 * ========================================================= */

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
    padding: var(--space-5) var(--space-6);
    border-bottom: 1px solid var(--color-border);
    flex-shrink: 0;
}

.modal-title {
    font-size: var(--text-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    line-height: var(--leading-tight);
    margin: 0;
}

.modal-body {
    flex: 1;
    padding: var(--space-6);
    overflow-y: auto;
    color: var(--color-text-muted);
    line-height: var(--leading-relaxed);
}

.modal-footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-6);
    border-top: 1px solid var(--color-border);
    flex-shrink: 0;
    background-color: var(--color-bg-subtle);
}

/* =========================================================
 * MODAL CLOSE BACKDROP
 * =========================================================
 * Clicking the overlay (outside modal-dialog) closes it.
 * The .modal-backdrop is a full-size link to "#" that sits
 * behind the dialog.
 */

.modal-backdrop {
    position: absolute;
    inset: 0;
    z-index: -1;
    cursor: pointer;
}

/* =========================================================
 * DRAWER (Side modal)
 * =========================================================
 * Usage: add .modal-drawer to the .modal element.
 */

.modal-drawer {
    justify-content: flex-end;
    align-items: stretch;
    padding: 0;
}

.modal-drawer .modal-dialog {
    max-width: 28rem;
    max-height: 100%;
    height: 100%;
    transform: translateX(100%);
    transition: transform var(--duration-300) var(--ease-out);
}

.modal-drawer:target .modal-dialog {
    transform: translateX(0);
}

.modal-drawer .modal-content {
    border-radius: var(--radius-2xl) 0 0 var(--radius-2xl);
    height: 100%;
    max-height: 100%;
}

/* Left drawer */
.modal-drawer-left {
    justify-content: flex-start;
}

.modal-drawer-left .modal-dialog {
    transform: translateX(-100%);
}

.modal-drawer-left:target .modal-dialog {
    transform: translateX(0);
}

.modal-drawer-left .modal-content {
    border-radius: 0 var(--radius-2xl) var(--radius-2xl) 0;
}

/* =========================================================
 * ALERT DIALOG (Confirmation)
 * ========================================================= */

.modal-alert .modal-dialog {
    max-width: 26rem;
}

.modal-alert .modal-body {
    text-align: center;
    padding: var(--space-8) var(--space-6) var(--space-4);
}

.modal-alert .modal-icon {
    font-size: var(--text-4xl);
    margin-bottom: var(--space-4);
    display: block;
}

.modal-alert .modal-footer {
    justify-content: center;
}

/* =========================================================
 * PREVENT BODY SCROLL (add to body when modal is open)
 * =========================================================
 * Since we're CSS-only, add this class via :has() if supported:
 *
 *   body:has(.modal:target) { overflow: hidden; }
 */

body:has(.modal:target) {
    overflow: hidden;
}